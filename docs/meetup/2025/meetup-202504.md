# Pitagora Meetup 2025-

## 概要

- 日時： 2025年4月4日（金） 13:00 〜 18:00
- 場所：
  - オンサイト会場:
    - 人数制限があるため、オフライン参加を希望する方はお問い合わせください
    - COVID19 感染対策にご協力ください。
  - オンライン会場:
    - Discord: `Pitagora / Workflow Meetup Japan` サーバ

## 問い合わせ

- 幹事: 大田 `tazro.ohta [at] chiba-u.jp`

## タイムテーブル

途中参加、途中退出は自由です。初めて参加される方はぜひ [過ごし方ガイド](/events/meetup/whatis) をご覧ください。

|    Time     |                        |
| :---------: | :--------------------: |
| 13:00-13:15 |     今日の作業確認     |
| 13:15-17:00 | 開発とディスカッション |
| 17:00-18:00 |      ラップアップ      |
|   18:00-    |       有識者会議       |

## ミートアップの主旨

-   データ解析ツール・ワークフローを共有する
    -   ソフトウェアをコンテナ化する
    -   Galaxy や CWL などを使ってツール定義、ワークフロー定義を書く
    -   ドキュメントを書いて GitHub で公開する
-   共有されたツールやワークフローを実行する
    -   うまくいったこと、うまくいかなかったことを記録する
-   技術情報を共有する
    -   twitter に post する
    -   ブログを書く
-   関連OSSプロジェクトにコミットする
    -   SNSで質問する
        -   hashtag をつけて twitter で
    -   プロジェクトの Gitter channel があればそこで聞く
    -   Issueを立てる
    -   Pull Request を送る
-   その他データ解析に関わる人々の日々の暮らしが豊かになる開発を進める

## まとめ

### 大田

- 理研和光のイベントに出席するためリモートです、有識者会議から合流したいです

### 石井

- ワークフローミートアップと共催
    - ワークフローミートアップは5/7(Wed)の予定です。
- 久しぶりに現地参加
- 開発用レポジトリのmainブランチへのpushを禁止したい
    - [ルールセットについて \- GitHub Docs](https://docs.github.com/ja/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets)
- podmanについて、詳しくなった。同じことがおきないことを祈りたい


### 福井

- オフィス解約するのでサービス解約手続きしてました。

### 末竹

- podman + elasticsearch が outOfMemory で落ちる
    - でも、メモリは余裕ある
    - ulimit などは十分におおい
    - podman の pids-limit のせいっぽいのまで突き止めた
    - 丹生さんが詳しく書いてくれるはず

### 丹生
- GitHub Organization だと private repo で rulesets は利用できない…
    - 組織なんだからお金出してねってことか (それはそう)
- HOME が共有されている特定のノードで systemd サービスを起動したい
    - 下手すると全部のノードでサービスが動いてしまう
    - `ExecStartPre=sh -c 'test $(hostname) = ${TARGET_HOST}'` で対応
- podman 個別の制限事項
    - ホスト上の ulimit とは別に、podman は独自でコンテナ内のプロセス数を制限している (デフォルトは 2048)
    - 以下のコマンドでコンテナインスタンスで作成できるプロセス数を確認できる
      ```console
      $ podman inspect --format '{{.HostConfig.PidsLimit}}' instance-id
      2048
      ```
    - 対処方法は以下:
        - compose.yaml 中に `pids_limit` を追加する
            - [公式ドキュメント](https://docs.docker.jp/compose/compose-file/index.html#pids-limit)
        - `podman run` コマンドに `--pids-limit` を渡す
            - [公式ドキュメント](https://docs.podman.io/en/latest/markdown/podman-run.1.html#pids-limit-limit)
        - `containers.conf` に `pids_limit` を指定する
            - [公式ドキュメント](https://github.com/containers/common/blob/main/docs/containers.conf.5.md)
            - 無制限にしたい場合には `0` を指定する必要がある点に注意 (他は `-1` が無制限)
    - インスタンスの cgroup 設定を変更する `podman update` というコマンドが存在するが、反映にはインスタンスの再起動が必要だった (実行中のインスタンスには効果がない？)
    - コンテナインスタンスのホスト上での capability も、podman 側で独自に制限をかけている
        - このせいで podman に ambient capability で capability を渡しても無視される…つらい
        - こちらはプロセス数とは異なり、制御する方法がないように見える

### 池田
- フレッツ光の工事を予定していたため途中から参加
    - 現地調査の結果本日の工事はできず半月延期
- 解析ツールの内部動作をトレース


<script>
document.addEventListener("DOMContentLoaded", function() {
    var elementToRemove = document.querySelector('h1 a[href="https://pitagora-network.org/events/"]');
    if (elementToRemove) {
        var parent = elementToRemove.closest('h1'); // Find the closest <h1> ancestor
        if (parent) {
            parent.remove(); // Remove the <h1> element
        }
    }
});
</script>
