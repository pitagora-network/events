# Pitagora Meetup 2025-03

## 概要

- 日時： 2025年03月06日（木） 13:00 〜 18:00
- 場所：
  - オンサイト会場:
    - 人数制限があるため、オフライン参加を希望する方はお問い合わせください
    - COVID19 感染対策にご協力ください。
  - オンライン会場:
    - Discord: `Pitagora / Workflow Meetup Japan` サーバ

## 問い合わせ

- 幹事: 大田 `tazro.ohta [at] chiba-u.jp`

## タイムテーブル

途中参加、途中退出は自由です。初めて参加される方はぜひ [過ごし方ガイド](/events/meetup/whatis) をご覧ください。

|    Time     |                        |
| :---------: | :--------------------: |
| 13:00-13:15 |     今日の作業確認     |
| 13:15-17:00 | 開発とディスカッション |
| 17:00-18:00 |      ラップアップ      |
|   18:00-    |       有識者会議       |

## ミートアップの主旨

-   データ解析ツール・ワークフローを共有する
    -   ソフトウェアをコンテナ化する
    -   Galaxy や CWL などを使ってツール定義、ワークフロー定義を書く
    -   ドキュメントを書いて GitHub で公開する
-   共有されたツールやワークフローを実行する
    -   うまくいったこと、うまくいかなかったことを記録する
-   技術情報を共有する
    -   twitter に post する
    -   ブログを書く
-   関連OSSプロジェクトにコミットする
    -   SNSで質問する
        -   hashtag をつけて twitter で
    -   プロジェクトの Gitter channel があればそこで聞く
    -   Issueを立てる
    -   Pull Request を送る
-   その他データ解析に関わる人々の日々の暮らしが豊かになる開発を進める

## まとめ

- 参加者: 8名

### 大田

- Nextflow pipeline (nf-core/sarek) を動かしているが遅い気がしているので調査
- 「在庫はあるが年度内の納品は無理です」という連絡を頂いたときの顔
- 確定申告終わらせました、今年の分は青色申告したいのでその準備
- 来週開催される [Graph Summit 2025](https://github.com/dbcls/graphsummit/wiki/2025) にインフラサポート部隊として参加してきます
    - AWS インスタンスに環境構築する部分で Warp.app の Agent mode by claude 3.7 sonnet を使っているけど便利すぎる、ガンガン sudo 叩いていて脳汁が出るけど apt install に `-y` つけないから Yes はしてあげないといけないという

### 丹生
- journalctl のログ絞り込みが便利
    - `journalctl -u nginx.service --since "3minutes ago"` とかで雑検索できる
    - 標準だと直近1000件までしか保持されていないのが玉に瑕
    - 同じように雑検索できるログ処理系/DBなど知りませんか！
- rootless podman + Linux capability と戦っているが勝てるビジョンが全然浮かばない…
    - やりたいこと: root systemd で `CAP_NET_BIND_SERVICE` (i.e., 特権ポートを使える権限) を与えて rootless podman で特権ポートを使いたい
        - 注意: `--cap-add` はコンテナ内の Capability に関するオプションなので用途が異なる
    - わかっていること
        - 古の Linux だと実行ファイルに Capability を与える方法しかなかった (File Capability)
            - `CAP_NET_RAW` が必要な ping が誰でも実行できるのはこれのおかげ[だった](https://blog.ssrf.in/post/ping-does-not-require-cap-net-raw-capability/)
            - Nginx などはこれをやりたくないのか、root で特権ポートを開く -> 非特権ユーザーに成り代わって特権ポートを使い続ける、という手段を取っている
        - 最近の Linux には [Ambient Capability](https://gihyo.jp/admin/serial/01/linux_containers/0043) という機能があり、特定の Capability だけ渡してサブプロセス実行ができる
            - つまり root systemd から `CAP_NET_BIND_SERVICE` だけ渡して一般ユーザー権限で rootless podman の実行ができる！…はずなんだけど…
    - 現状**動かん**
        - 以下で擬似的に再現が可能: `sudo capsh --caps="cap_setpcap,cap_setuid,cap_setgid+ep cap_net_bind_service+eip" --user=$USER --keep=1 --addamb=cap_net_bind_service -- -c "podman run --rm --network=host -v $PWD:$PWD docker.io/svenstaro/miniserve -p 80 $PWD"`
            - [miniserve](https://github.com/svenstaro/miniserve) は設定無しでそれっぽく動くサーバープログラム (動作確認用)
        - `-- -c` 以下を `"podman ... miniserve -p 80 ..."` ではなく、ホスト上の `miniserve` を使って `"miniserve -p 80 ..."` とすると動く
                - つまり Ambient Capability の与え方を間違っているわけではない
        - 調べてみると、インスタンスを監視する `conmon` は `podman` の単純な子プロセスではなさそう、ということがわかってきた
          ```
          # 以下は `podman run ... svenstaro/miniserve -p 8080 ...` した場合
          $ pstree
          systemd─┬─2*[agetty]
                  ├─init-systemd ...─┬─conmon───miniserve───17*[{miniserve}] # なぜか systemd 直下に conmon がいる
                  │                  ├─zsh───podman───14*[{podman}] # zsh 直下の podman が実行したコマンド。下にぶら下がってる podman*14 は誰やねん
          ```
        - `podman` が `conmon` を実行する過程で `CAP_NET_BIND_SERVICE` が失われている
                - `getpcaps $PID` などで確認できる
        - その他: seccomp とかも調べてみたけど直接の原因ではなさそうだった
    - 普通にコンテナ諦めるって手がある (n週目くらい)
        - nginx だとコンテナ経由でないと systemctl でログ補足できなくなるので不便…
            - systemd は各サービスの標準出力・エラー出力をソケットにつないでいるため、stdout/stderr をファイルだと思っているプログラムではうまく出力を捕捉してくれないことがある
    - 周辺知識はたくさん得られるが、解きたい問題は解けない…


### 池田

- 今回はリモート参加
- iijmioのフレッツ光クロスを申し込んだけれど、果たして無事開通までこぎつけられるのか？


### 那須野

- どう整理して検討したらよいかさっぱり分からない曖昧模糊な要件定義に関する作業を OpenAI o1 に助けてもらいながらも苦戦中。
- [東北新幹線 連結部分外れる|NHK](https://www3.nhk.or.jp/news/html/20250306/k10014741221000.html)
  - 最近乗る機会が多いのでホント困る…
- [押すだけテレビ電話 memet](https://www.watch.impress.co.jp/docs/news/1664457.html)
    - これを自作するか既存の何かを流用することで実現したいが、どんなアプローチがあるだろうか？（そのまま買ってサブスクしたら負けな気がして）
    - Android / iPad などを単機能化するアプローチ？（複数あるがどれも高齢者向けアクセシビリティとしては不十分なんですよね）

### 末竹

- さくらクラウドの話をした
- NIG の podman について思いを馳せたりしていた
- 色々実装している

### 福井

- さくらのクラウドでGPUマシンを上げた
    - GPUドライバーのインストールに苦戦中

- journalctlで個人的によく使ってるオプション
    - `-x`: 拡張行表示
    - `-e`: 最新行から表示
    - `-b`: 最新起動時からのログのみ表示
        - `-b 1`: 1つ前の起動時のログのみ表示


### 山中

- JTC だから Discord に入れない
    - > (那) JTCはAI開発ツールは許容されますか？（案件によっては当然制約受けますよね…）
- 一時的な右手の神経麻痺によりこの1ヵ月キーボードタイプができない
    - でも、音声入力が便利
- みなさんが AI 開発ツールをどのように使いこなしているか知りたい
    - GitHubコパイロットの他にV0やCursorあたり
    - 特にフロントエンドとバックエンドのつなぎ込みのタイミングなど
    - 次回参加したときにお尋ねします

    - > (福)僕もClaude Sonnetの話題を見ててChatGPTからClaudeに乗り換えようか迷っていたりするので気になります。GPT4.5の性能次第な気はしますが。


### 石井

- リモート参加
- LLMとかMCPに対して全般として
    - 既存コードの読み込みとテストを書いてもらうあたりを期待している。
    - 一方それ以上のことがどの程度できるのかも気になり始めている。
- claude 3.7と[cline](https://cline.bot/),cursor に驚いている
    - VSCodeのLiveShare以来の衝撃があるかもしれない。

    - claude sonnet 3.7 に驚いたところ
        - 修正が必要なところもある感じだが、そもそもこちらの考えがあまいのかもしれない。
        - 開発用のモックデータをしれっと作ってくれていたり、本番ではこのコードを使ってね的なコード
    - clineに驚いたところ
        - 本当にからのディレクトリ .git しかないところからはじめると、とりあえず、`ls -lar`からしてくれる。
        - それっぽいコードができている。
            - これはある種そうなるだろうとおもったけど
        - テキスト校正系のツールが指摘している問題も修正してくれる。
    - cursorもこの前使った感じではうまく使えばよさそうであった
        - ただ一部問題の修正にはまることがあったので、そのとき久しぶりに人間が登場感もあった。
- [devin](https://app.devin.ai/), [OpenHands](https://github.com/All-Hands-AI/OpenHands)も試してみたい。

- RTA 不思議なダンジョン６の、しれん６の https://www.twitch.tv/videos/2390031052


<script>
document.addEventListener("DOMContentLoaded", function() {
    var elementToRemove = document.querySelector('h1 a[href="https://pitagora-network.org/events/"]');
    if (elementToRemove) {
        var parent = elementToRemove.closest('h1'); // Find the closest <h1> ancestor
        if (parent) {
            parent.remove(); // Remove the <h1> element
        }
    }
});
</script>
